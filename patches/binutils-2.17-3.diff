diff -ruN binutils-2.17/bfd/Makefile.am binutils-2.17-3/bfd/Makefile.am
--- binutils-2.17/bfd/Makefile.am	2006-06-24 04:17:17.000000000 +1000
+++ binutils-2.17-3/bfd/Makefile.am	2007-08-01 16:45:25.000000000 +1000
@@ -934,12 +934,12 @@
 bfdver.h: $(srcdir)/version.h $(srcdir)/Makefile.in
 	@echo "creating $@"
 	@bfd_version=`echo "$(VERSION)" | sed -e 's/\([^\.]*\)\.*\([^\.]*\)\.*\([^\.]*\)\.*\([^\.]*\)\.*\([^\.]*\).*/\1.00\2.00\3.00\4.00\5/' -e 's/\([^\.]*\)\..*\(..\)\..*\(..\)\..*\(..\)\..*\(..\)$$/\1\2\3\4\5/'` ;\
-	bfd_version_string="\"$(VERSION)\"" ;\
+	bfd_version_string="\"$(VERSION) Debian GNU/Linux\"" ;\
 	if test "x$(RELEASE)" = x ; then \
 	  bfd_version_date=`sed -n -e 's/.*DATE //p' < $(srcdir)/version.h` ;\
-	  bfd_version_string="\"$(VERSION) $${bfd_version_date}\"" ;\
+	  bfd_version_string="\"$(VERSION) $${bfd_version_date} Debian GNU/Linux\"" ;\
 	fi ;\
-	sed -e "s/@bfd_version@/$$bfd_version/" -e "s/@bfd_version_string@/$$bfd_version_string/" < $(srcdir)/version.h > $@
+	sed -e "s,@bfd_version@,$$bfd_version," -e "s,@bfd_version_string@,$$bfd_version_string," < $(srcdir)/version.h > $@
 
 # What appears below is generated by a hacked mkdep using gcc -MM.
 
diff -ruN binutils-2.17/bfd/Makefile.in binutils-2.17-3/bfd/Makefile.in
--- binutils-2.17/bfd/Makefile.in	2006-06-24 04:17:19.000000000 +1000
+++ binutils-2.17-3/bfd/Makefile.in	2007-08-01 16:45:25.000000000 +1000
@@ -1500,12 +1500,12 @@
 bfdver.h: $(srcdir)/version.h $(srcdir)/Makefile.in
 	@echo "creating $@"
 	@bfd_version=`echo "$(VERSION)" | sed -e 's/\([^\.]*\)\.*\([^\.]*\)\.*\([^\.]*\)\.*\([^\.]*\)\.*\([^\.]*\).*/\1.00\2.00\3.00\4.00\5/' -e 's/\([^\.]*\)\..*\(..\)\..*\(..\)\..*\(..\)\..*\(..\)$$/\1\2\3\4\5/'` ;\
-	bfd_version_string="\"$(VERSION)\"" ;\
+	bfd_version_string="\"$(VERSION) Debian GNU/Linux\"" ;\
 	if test "x$(RELEASE)" = x ; then \
 	  bfd_version_date=`sed -n -e 's/.*DATE //p' < $(srcdir)/version.h` ;\
-	  bfd_version_string="\"$(VERSION) $${bfd_version_date}\"" ;\
+	  bfd_version_string="\"$(VERSION) $${bfd_version_date} Debian GNU/Linux\"" ;\
 	fi ;\
-	sed -e "s/@bfd_version@/$$bfd_version/" -e "s/@bfd_version_string@/$$bfd_version_string/" < $(srcdir)/version.h > $@
+	sed -e "s,@bfd_version@,$$bfd_version," -e "s,@bfd_version_string@,$$bfd_version_string," < $(srcdir)/version.h > $@
 
 # What appears below is generated by a hacked mkdep using gcc -MM.
 
diff -ruN binutils-2.17/bfd/opncls.c binutils-2.17-3/bfd/opncls.c
--- binutils-2.17/bfd/opncls.c	2006-03-16 23:20:16.000000000 +1100
+++ binutils-2.17-3/bfd/opncls.c	2007-08-01 16:45:25.000000000 +1000
@@ -158,6 +158,13 @@
 {
   bfd *nbfd;
   const bfd_target *target_vec;
+  struct stat s;
+
+  if (stat (filename, &s) == 0)
+    if (S_ISDIR(s.st_mode)) {
+      bfd_set_error (bfd_error_file_not_recognized);
+      return NULL;
+    }
 
   nbfd = _bfd_new_bfd ();
   if (nbfd == NULL)
diff -ruN binutils-2.17/gprof/gprof.texi binutils-2.17-3/gprof/gprof.texi
--- binutils-2.17/gprof/gprof.texi	2005-05-09 16:55:25.000000000 +1000
+++ binutils-2.17-3/gprof/gprof.texi	2007-08-01 16:45:25.000000000 +1000
@@ -138,6 +138,10 @@
 If more than one profile file is specified, the @code{gprof}
 output shows the sum of the profile information in the given profile files.
 
+If you use gcc 2.95.x or 3.0 to compile your binaries, you may need
+to add the @samp{-fprofile-arcs} to the compile command line in order
+for the call graphs to be properly stored in gmon.out.
+
 @code{Gprof} calculates the amount of time spent in each routine.
 Next, these times are propagated along the edges of the call graph.
 Cycles are discovered, and calls into a cycle are made to share the time
@@ -182,7 +186,7 @@
 @c man end
 
 @c man begin SEEALSO
-monitor(3), profil(2), cc(1), prof(1), and the Info entry for @file{gprof}.
+profil(2), cc(1), prof(1), and the Info entry for @file{gprof}.
 
 ``An Execution Profiler for Modular Programs'',
 by S. Graham, P. Kessler, M. McKusick;
@@ -268,6 +272,11 @@
 options.  The same option, @samp{-pg}, alters either compilation or linking
 to do what is necessary for profiling.  Here are examples:
 
+If you use gcc 2.95.x or 3.0.x, you may need to add the
+@samp{-fprofile-arcs} option to the compile line along with @samp{-pg}
+in order to allow the call-graphs to be properly included in the gmon.out
+file.
+
 @example
 cc -g -c myprog.c utils.c -pg
 cc -o myprog myprog.o utils.o -pg
diff -ruN binutils-2.17/ld/emultempl/elf32.em binutils-2.17-3/ld/emultempl/elf32.em
--- binutils-2.17/ld/emultempl/elf32.em	2006-06-12 23:05:04.000000000 +1000
+++ binutils-2.17-3/ld/emultempl/elf32.em	2007-08-01 16:45:26.000000000 +1000
@@ -970,6 +970,8 @@
 	      && command_line.rpath == NULL)
 	    {
 	      lib_path = (const char *) getenv ("LD_RUN_PATH");
+	      if ((lib_path) && (strlen (lib_path) == 0))
+		lib_path = NULL;
 	      if (gld${EMULATION_NAME}_search_needed (lib_path, &n,
 						      force))
 		break;
@@ -1154,6 +1156,8 @@
   rpath = command_line.rpath;
   if (rpath == NULL)
     rpath = (const char *) getenv ("LD_RUN_PATH");
+  if ((rpath) && (strlen (rpath) == 0))
+      rpath = NULL;
   if (! (bfd_elf_size_dynamic_sections
 	 (output_bfd, command_line.soname, rpath,
 	  command_line.filter_shlib,
